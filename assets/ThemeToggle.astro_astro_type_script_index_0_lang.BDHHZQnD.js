const r="theme-preference";function o(){return typeof localStorage<"u"&&localStorage.getItem(r)?localStorage.getItem(r)==="dark"?"dark":"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function n(e){document.documentElement.classList.toggle("dark",e==="dark"),localStorage.setItem(r,e)}function a(){const t=o()==="dark"?"light":"dark";n(t)}class l extends HTMLElement{constructor(){super(),n(o());const t=this.querySelector("button");t&&t.addEventListener("click",()=>{a()}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:c})=>{localStorage.getItem(r)||n(c?"dark":"light")})}}customElements.define("theme-toggle",l);
