document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".version-history-more").forEach(e=>{e.addEventListener("click",s=>{s.preventDefault();const t=e.closest(".version-history")?.querySelector(".version-history-list")?.querySelectorAll(".version-history-item");t&&(t.forEach(i=>{i.classList.contains("hidden")&&i.classList.remove("hidden")}),e.textContent="折りたたむ",e.classList.add("is-expanded"),e.addEventListener("click",i=>{i.preventDefault(),e.classList.contains("is-expanded")?(Array.from(t).slice(3).forEach(r=>{r.classList.add("hidden")}),e.textContent="すべてのバージョンを表示",e.classList.remove("is-expanded")):(t.forEach(r=>{r.classList.remove("hidden")}),e.textContent="折りたたむ",e.classList.add("is-expanded"))},{once:!0}))})}),d()});function d(){document.querySelectorAll(".version-dropdown [data-version-link]").forEach(e=>{const s=e.getAttribute("href");s&&e.addEventListener("click",async n=>{if(n.preventDefault(),await c(s))window.location.href=s;else{const i=await l(s);window.location.href=i}})})}async function c(o){try{return(await fetch(o,{method:"HEAD"})).ok}catch{return!1}}async function l(o){const e=o.split("/"),s=e.findIndex(a=>a==="docs");if(s===-1)return o;const n=e.slice(0,s+3).join("/"),t=e[s+3],i=e[s+4],r=[n+"/"+t+"/"+i+"/01-getting-started",n+"/"+t+"/"+i+"/getting-started",n+"/"+t+"/guide/01-getting-started",n+"/"+t+"/guide/getting-started",n+"/"+t+"/",n+"/"+t];for(const a of r)if(await c(a))return a;return o}
