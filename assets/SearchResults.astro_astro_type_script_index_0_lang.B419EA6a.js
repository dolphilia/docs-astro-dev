import{d as c,l as h}from"./index.kbYS10fO.js";function u(e,t=c,s={}){const n=e.split(".");let o=h[t];o||(o=h[c]);for(const a of n)if(o&&typeof o=="object"&&a in o)o=o[a];else return t!==c?u(e,c,s):e;return typeof o!="string"?e:m(o,s)}function m(e,t){return Object.entries(t).reduce((s,[n,o])=>{const a=new RegExp(`{${n}}`,"g");return s.replace(a,String(o))},e)}const r={searchResults:document.getElementById("search-results"),searchResultsContainer:document.getElementById("search-results-container"),searchLoading:document.getElementById("search-loading"),searchEmpty:document.getElementById("search-empty"),noResultsMessage:document.getElementById("no-results-message"),closeSearchResults:document.getElementById("close-search-results")};function l(e){r.searchLoading&&r.searchLoading.classList.toggle("hidden",!e)}function i(e,t="",s="ja"){if(r.searchEmpty&&r.noResultsMessage)if(r.searchEmpty.classList.toggle("hidden",!e),e&&t){const n=u("search.noResults",s).replace("{query}",t);r.noResultsMessage.textContent=n}else r.noResultsMessage.textContent=""}function f(){r.searchResultsContainer&&r.searchResultsContainer.querySelectorAll(".search-result-item, .alert-error").forEach(t=>t.remove())}document.addEventListener("docsearch",e=>{const{query:t}=e.detail;r.searchResults&&r.searchResultsContainer&&(r.searchResults.classList.remove("hidden"),l(!0),i(!1),f(),setTimeout(()=>{L(t)},500))});r.closeSearchResults&&r.searchResults&&r.closeSearchResults.addEventListener("click",()=>{r.searchResults.classList.add("hidden")});function g(){const e=window.location.pathname,t=e.match(/^\/(en|ja)/),s=e.match(/\/(v[0-9]+)/);return{lang:t?t[1]:"en",version:s?s[1]:"v1"}}async function p(e,t){const s=`/search/index-${e}-${t}.json`,n=await fetch(s);if(!n.ok)throw new Error(`検索インデックスの取得に失敗しました: ${n.status}`);return n.json()}function R(e,t){const s=t.toLowerCase();return e.filter(n=>{const o=n.title.toLowerCase().includes(s),a=n.content.toLowerCase().includes(s);return o||a}).slice(0,10)}function w(e,t){let s="";if(e.content){const o=e.content.toLowerCase().indexOf(t.toLowerCase());if(o!==-1){const a=Math.max(0,o-50),d=Math.min(e.content.length,o+t.length+50);s=e.content.substring(a,d),a>0&&(s="..."+s),d<e.content.length&&(s+="...")}else s=e.content.substring(0,100)+"..."}return`
      <a href="${e.url}" class="block">
        <div class="card bg-base-100 shadow-sm hover:shadow-md transition-shadow">
          <div class="card-body p-4">
            <div class="flex items-center justify-between">
              <h3 class="card-title text-base">${e.title}</h3>
              <div class="badge badge-sm">${e.project} ${e.version}</div>
            </div>
            <p class="text-sm opacity-70">${s}</p>
          </div>
        </div>
      </a>
    `}function v(e,t){r.searchResultsContainer&&e.forEach(s=>{const n=document.createElement("div");n.className="search-result-item",n.innerHTML=w(s,t),r.searchResultsContainer.appendChild(n)})}function C(e){if(r.searchResultsContainer){const t=document.createElement("div");t.className="alert alert-error",t.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
        <span>${u("common.error",e)}</span>
      `,r.searchResultsContainer.appendChild(t)}}async function L(e){if(!r.searchResultsContainer)return;const{lang:t,version:s}=g();try{const n=await p(t,s),o=R(n.documents,e);l(!1),o.length>0?(i(!1),v(o,e)):i(!0,e,t)}catch(n){console.error("検索中にエラーが発生しました:",n),l(!1),i(!0,e,t),C(t)}}
