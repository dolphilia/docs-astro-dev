---
import MainLayout from './MainLayout.astro';
import { Sidebar } from '@docs/ui/src/components/Sidebar.astro';
import { VersionSelector } from '@docs/versioning/src/components/VersionSelector.astro';
import { SearchBar } from '@docs/search/src/components/SearchBar.astro';

import { t as translate } from '@docs/i18n/src/utils/translate';

interface Props {
  title: string;
  lang: string;
  version: string;
}

const { title, lang, version } = Astro.props;

// サイドバー項目の定義
const sidebarItems = [
  {
    title: translate('docs.guide', lang),
    items: [
      { title: translate('docs.getting_started', lang), href: `/${lang}/${version}/guide/getting-started` },
      { title: translate('docs.installation', lang), href: `/${lang}/${version}/guide/installation` },
      { title: translate('docs.configuration', lang), href: `/${lang}/${version}/guide/configuration` },
    ]
  },
  {
    title: translate('navigation.api', lang),
    items: [
      { title: translate('docs.overview', lang), href: `/${lang}/${version}/api` },
      { title: translate('docs.reference', lang), href: `/${lang}/${version}/api/reference` },
    ]
  }
];

// 利用可能なバージョン
const versions = [
  { id: 'v1', name: 'Version 1.0', date: new Date('2024-01-01'), isLatest: false },
  { id: 'v2', name: 'Version 2.0', date: new Date('2025-01-01'), isLatest: true }
];
---

<MainLayout title={title} lang={lang} version={version}>
  <div class="flex flex-col md:flex-row gap-8">
    <aside class="w-full md:w-64 shrink-0">
      <div class="sticky top-4 space-y-6">
        <SearchBar placeholder={translate('search.placeholder', lang)} />
        
        <VersionSelector 
          currentVersion={version}
          versions={versions}
          basePath={`/${lang}`}
        />
        
        <Sidebar items={sidebarItems} title={translate('docs.documentation', lang)} />
      </div>
    </aside>
    
    <div class="flex-grow">
      <article class="prose max-w-none">
        <h1>{title}</h1>
        <slot />
      </article>
    </div>
  </div>
</MainLayout>
