---
import MainLayout from '../../layouts/MainLayout.astro';
import { Button, Card } from '@docs/ui/components';
import { VersionSelector } from '@docs/versioning/components';
import { SearchBar } from '@docs/search/components';
import versions from '../../config/versions.config';
import docsConfig from '../../config/docs.config';
import type { LocaleKey } from '@docs/i18n/locales';
import { translate } from '@docs/i18n/utils';

export function getStaticPaths() {
  return docsConfig.supportedLangs.map(lang => ({
    params: { lang }
  }));
}

const { lang: langParam } = Astro.params;
const lang = (langParam || 'en') as LocaleKey;
const latestVersion = versions.find(v => v.isLatest)?.id || 'v2';
// GitHub Pagesのベースパス
const baseUrl = docsConfig.baseUrl;
---

<MainLayout title={translate('docs.documentation', lang)} lang={lang}>
  <div class="text-center py-12">
    <h1 class="text-4xl font-bold mb-4">{translate('docs.documentation', lang)}</h1>
    <p class="text-xl mb-8 max-w-2xl mx-auto">
      {translate('docs.description', lang)}
    </p>
    
    <div class="flex justify-center gap-4 mb-12">
      <Button href={`${baseUrl}/${lang}/${latestVersion}/guide/getting-started`} variant="primary" size="lg">
        {translate('docs.get_started', lang)}
      </Button>
      <Button href="https://github.com" variant="outline" size="lg">
        GitHub
      </Button>
    </div>
    
    <div class="max-w-md mx-auto mb-12">
      <SearchBar placeholder={translate('search.placeholder', lang)} />
    </div>
    
    <div class="max-w-xs mx-auto mb-12">
      <VersionSelector 
        currentVersion={latestVersion}
        versions={versions}
        basePath={`${baseUrl}/${lang}`}
      />
    </div>
  </div>
  
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
    <Card
      title={translate('docs.getting_started', lang)}
      href={`${baseUrl}/${lang}/${latestVersion}/guide/getting-started`}
    >
      {translate('docs.getting_started_description', lang)}
    </Card>
    
    <Card
      title={translate('docs.installation', lang)}
      href={`${baseUrl}/${lang}/${latestVersion}/guide/installation`}
    >
      {translate('docs.installation_description', lang)}
    </Card>
    
    <Card
      title={translate('docs.configuration', lang)}
      href={`${baseUrl}/${lang}/${latestVersion}/guide/configuration`}
    >
      {translate('docs.configuration_description', lang)}
    </Card>
    
    <Card
      title={translate('docs.api_reference', lang)}
      href={`${baseUrl}/${lang}/${latestVersion}/api/reference`}
    >
      {translate('docs.api_reference_description', lang)}
    </Card>
    
    <Card
      title={translate('docs.examples', lang)}
      href={`${baseUrl}/${lang}/${latestVersion}/examples`}
    >
      {translate('docs.examples_description', lang)}
    </Card>
    
    <Card
      title={translate('docs.faq', lang)}
      href={`${baseUrl}/${lang}/${latestVersion}/faq`}
    >
      {translate('docs.faq_description', lang)}
    </Card>
  </div>
</MainLayout>
