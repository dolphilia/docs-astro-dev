---
interface Props {
  title?: string;
  variant?: 'info' | 'success' | 'warning' | 'error';
  class?: string;
  [key: string]: any;
}

const {
  title,
  variant = 'info',
  class: className = '',
  ...rest
} = Astro.props;

// アイコンマッピング
const iconMap = {
  info: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="icon"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
  success: `<svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`,
  warning: `<svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>`,
  error: `<svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`,
};
---

<div class:list={['alert', `alert-${variant}`, className]} role="alert" {...rest}>
  <div set:html={iconMap[variant]} />
  <div class="content">
    {title && <h3 class="title">{title}</h3>}
    <div class="message">
      <slot />
    </div>
  </div>
</div>

<style>
  .alert {
    display: flex;
    align-items: flex-start;
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 0.5rem;
    border-width: 1px;
  }

  .alert-info {
    background-color: #eff6ff;
    border-color: #bfdbfe;
    color: #1e40af;
  }

  .alert-info .icon {
    color: #3b82f6;
  }

  .alert-success {
    background-color: #f0fdf4;
    border-color: #bbf7d0;
    color: #166534;
  }

  .alert-success .icon {
    color: #22c55e;
  }

  .alert-warning {
    background-color: #fffbeb;
    border-color: #fde68a;
    color: #92400e;
  }

  .alert-warning .icon {
    color: #f59e0b;
  }

  .alert-error {
    background-color: #fef2f2;
    border-color: #fecaca;
    color: #991b1b;
  }

  .alert-error .icon {
    color: #ef4444;
  }

  .icon {
    flex-shrink: 0;
    width: 1.5rem;
    height: 1.5rem;
  }

  .content {
    margin-left: 0.75rem;
  }

  .title {
    font-weight: bold;
    font-size: 1rem;
  }

  .message {
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }
</style>
