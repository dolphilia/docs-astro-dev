---
/**
 * Lucideアイコンコンポーネント
 * Lucideアイコンライブラリを使用してアイコンを表示します
 */
import { Icon as LucideIconBase } from '@lucide/astro';
import type { IconNode } from '@lucide/astro';

interface Props {
  /**
   * Lucideアイコン名
   * @see https://lucide.dev/icons/
   */
  name: string;
  
  /**
   * アイコンのサイズ（em、rem、pxなどの単位で指定可能）
   * @default "1em"
   */
  size?: string;
  
  /**
   * アイコンの色
   * @default "currentColor"
   */
  color?: string;
  
  /**
   * アイコンのラベル（アクセシビリティ用）
   * 指定すると、スクリーンリーダーでラベルが読み上げられます
   * 指定しない場合、アイコンは装飾的なものとして扱われます
   */
  label?: string;
  
  /**
   * 追加のCSSクラス
   */
  class?: string;
  
  /**
   * アイコンのストロークの太さ
   * @default 2
   */
  strokeWidth?: number;
}

const { 
  name, 
  size = '1em', 
  color = 'currentColor',
  label,
  class: className = '',
  strokeWidth = 2,
} = Astro.props;

// ラベルが指定されている場合はaria-labelを設定、そうでない場合はaria-hiddenを設定
const a11yAttrs = label ? ({ 'aria-label': label } as const) : ({ 'aria-hidden': 'true' } as const);
---

<div class={`lucide-icon-wrapper ${className}`} {...a11yAttrs}>
  <LucideIconBase name={name} size={size} color={color} stroke-width={strokeWidth} />
</div>

<style define:vars={{ 'icon-size': size }}>
  .lucide-icon-wrapper {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--icon-size, 1em);
    height: var(--icon-size, 1em);
    vertical-align: middle;
  }
</style>
