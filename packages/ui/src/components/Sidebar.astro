---
// Sidebar.astro
interface SidebarItem {
  title: string;
  href?: string;
  items?: SidebarItem[];
}

interface Props {
  items: SidebarItem[];
  title?: string;
  class?: string;
}

const { items, title, class: className = '' } = Astro.props;
---

<aside 
  class:list={['sidebar', className]}
  role="complementary"
  aria-label={title || 'サイドナビゲーション'}
>
  {title && (
    <h3 class="sidebar-title" id="sidebar-title">
      {title}
    </h3>
  )}
  
  <nav aria-labelledby="sidebar-title">
    <ul class="sidebar-menu">
      {items.map((section, index) => (
        <li class="sidebar-section">
          {section.title && (
            <h4 
              class="section-title" 
              id={`section-${index}-title`}
            >
              {section.title}
            </h4>
          )}
          
          {section.items && (
            <ul aria-labelledby={`section-${index}-title`} class="section-items">
              {section.items.map((item) => (
                <li>
                  <a 
                    href={item.href}
                    class="sidebar-link"
                  >
                    {item.title}
                  </a>
                </li>
              ))}
            </ul>
          )}
        </li>
      ))}
    </ul>
  </nav>
</aside>

<style>
  .sidebar {
    width: 16rem;
    flex-shrink: 0;
  }

  .sidebar-title {
    margin-bottom: 0.75rem;
    font-weight: 600;
    font-size: 1.125rem;
  }

  .sidebar-menu {
    background-color: #f9fafb;
    border-radius: 0.5rem;
    padding: 0.5rem;
    width: 100%;
  }

  .sidebar-section {
    margin-bottom: 0.5rem;
  }

  .section-title {
    font-size: 0.875rem;
    font-weight: 500;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.5rem 0.75rem;
  }

  .section-items {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .sidebar-link {
    display: block;
    padding: 0.5rem 0.75rem;
    border-radius: 0.375rem;
    font-size: 1rem;
    font-weight: 500;
    color: #374151;
    transition: background-color 0.2s, color 0.2s;
  }

  .sidebar-link:hover {
    background-color: #e5e7eb;
    color: #111827;
  }
</style>
